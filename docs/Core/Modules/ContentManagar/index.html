<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>ContentManagar - MaDnhJS</title>
    <meta name="description" content="JS common functions" />
    <meta name="author" content="Do Danh Manh">
    <meta charset="UTF-8">
    <link rel="icon" href="../../../themes/daux/img/favicon-red.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='//fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link href='../../../themes/daux/css/theme.min.css' rel='stylesheet' type='text/css'><link href='../../../themes/daux/css/theme-red.min.css' rel='stylesheet' type='text/css'>
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="">
    
<div class="container-fluid fluid-height wrapper">
    <div class="navbar navbar-static-top hidden-print">
        <div class="container-fluid">
            <a class="brand navbar-brand pull-left" href="../../../index.html">MaDnhJS</a>
        </div>
    </div>
    <div class="row columns content">
        <div class="left-column article-tree col-sm-3 hidden-print">
            <!-- For Mobile -->
            <div class="responsive-collapse">
                <button type="button" class="btn btn-sidebar" id="menu-spinner-button">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="sub-nav-collapse" class="sub-nav-collapse">
                <!-- Navigation -->
                <ul class='nav nav-list'><li class=''><a href="../../../Getting_Started.html">Getting Started</a></li><li class='open'><a href="#" class="aj-nav folder">Core</a><ul class='nav nav-list'><li class=''><a href="../../../Core/Constant.html">Constant</a></li><li class=''><a href="#" class="aj-nav folder">Functions</a><ul class='nav nav-list'><li class=''><a href="../../../Core/Functions/asArray..html">_.M.asArray</a></li><li class=''><a href="../../../Core/Functions/asObject..html">_.M.asObject</a></li><li class=''><a href="../../../Core/Functions/async.html">_.M.async</a></li><li class=''><a href="../../../Core/Functions/callFunc.html">_.M.callFunc</a></li><li class=''><a href="../../../Core/Functions/capitalize.html">_.M.capitalize</a></li><li class=''><a href="../../../Core/Functions/chunk.html">_.M.chunk</a></li><li class=''><a href="../../../Core/Functions/chunks.html">_.M.chunks</a></li><li class=''><a href="../../../Core/Functions/className.html">_.M.className</a></li><li class=''><a href="../../../Core/Functions/contentType.html">_.M.contentType</a></li><li class=''><a href="../../../Core/Functions/currentID.html">_.M.currentID</a></li><li class=''><a href="../../../Core/Functions/defineConstant.html">_.M.defineConstant</a></li><li class=''><a href="../../../Core/Functions/defineObject.html">_.M.defineObject</a></li><li class=''><a href="../../../Core/Functions/errorArgs.html">_.M.errorArgs</a></li><li class=''><a href="../../../Core/Functions/errorCb.html">_.M.errorCb</a></li><li class=''><a href="../../../Core/Functions/escapeHTML.html">_.M.escapeHTML</a></li><li class=''><a href="../../../Core/Functions/firstNotEmpty.html">_.M.firstNotEmpty</a></li><li class=''><a href="../../../Core/Functions/inherit.html">_.M.inherit</a></li><li class=''><a href="../../../Core/Functions/isBlank.html">_.M.isBlank</a></li><li class=''><a href="../../../Core/Functions/isDefinedConstant.html">_.M.isDefinedConstant</a></li><li class=''><a href="../../../Core/Functions/isEven.html">_.M.isEven</a></li><li class=''><a href="../../../Core/Functions/isInstanceOf.html">_.M.isInstanceOf</a></li><li class=''><a href="../../../Core/Functions/isInteger.html">_.M.isInteger</a></li><li class=''><a href="../../../Core/Functions/isLikeString.html">_.M.isLikeString</a></li><li class=''><a href="../../../Core/Functions/isMultiple.html">_.M.isMultiple</a></li><li class=''><a href="../../../Core/Functions/isNumeric.html">_.M.isNumeric</a></li><li class=''><a href="../../../Core/Functions/isOdd.html">_.M.isOdd</a></li><li class=''><a href="../../../Core/Functions/isPrimitiveType.html">_.M.isPrimitiveType</a></li><li class=''><a href="../../../Core/Functions/left.html">_.M.left</a></li><li class=''><a href="../../../Core/Functions/logArgs.html">_.M.logArgs</a></li><li class=''><a href="../../../Core/Functions/logCb.html">_.M.logCb</a></li><li class=''><a href="../../../Core/Functions/loop.html">_.M.loop</a></li><li class=''><a href="../../../Core/Functions/minMax..html">_.M.minMax</a></li><li class=''><a href="../../../Core/Functions/nextID.html">_.M.nextID</a></li><li class=''><a href="../../../Core/Functions/nowSecond.html">_.M.nowSecond</a></li><li class=''><a href="../../../Core/Functions/oneOf.html">_.M.oneOf</a></li><li class=''><a href="../../../Core/Functions/padNumber.html">_.M.padNumber</a></li><li class=''><a href="../../../Core/Functions/randomString.html">_.M.randomString</a></li><li class=''><a href="../../../Core/Functions/removeItem.html">_.M.removeItem</a></li><li class=''><a href="../../../Core/Functions/repeat.html">_.M.repeat</a></li><li class=''><a href="../../../Core/Functions/reverseString.html">_.M.reverseString</a></li><li class=''><a href="../../../Core/Functions/setup.html">_.M.setup</a></li><li class=''><a href="../../../Core/Functions/span.html">_.M.span</a></li><li class=''><a href="../../../Core/Functions/toggle.html">_.M.toggle</a></li><li class=''><a href="../../../Core/Functions/valueAt.html">_.M.valueAt</a></li><li class=''><a href="../../../Core/Functions/warnArgs.html">_.M.warnArgs</a></li><li class=''><a href="../../../Core/Functions/warnCb.html">_.M.warnCb</a></li></ul></li><li class='open'><a href="#" class="aj-nav folder">Modules</a><ul class='nav nav-list'><li class=''><a href="../../../Core/Modules/BaseClass/index.html" class="folder">BaseClass</a><ul class='nav nav-list'></ul></li><li class=''><a href="../../../Core/Modules/FLAG/index.html" class="folder">FLAG</a><ul class='nav nav-list'><li class=''><a href="../../../Core/Modules/FLAG/API.html">API</a></li></ul></li><li class='open'><a href="../../../Core/Modules/ContentManagar/index.html" class="folder">ContentManagar</a><ul class='nav nav-list'><li class=''><a href="../../../Core/Modules/ContentManagar/API.html">API</a></li></ul></li></ul></li></ul></li></ul>

                <div class="sidebar-links">
                    
                        <!-- Links -->
                        <a href="https://github.com/madnh/madnhjs/archive/master.zip" target="_blank">Download</a><br><a href="https://github.com/madnh/madnhjs/issues" target="_blank">Help/Support/Bugs</a><br>
                        <!-- Twitter -->
                                                    <div class="twitter">
                                <hr/>
                                <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=dnh_ma&amp;show_count=false"></iframe>
                            </div>
                        
                        <hr/>
                    
                    <p><small>Documentation generated by <a href="http://daux.io">Daux.io</a></small></p>
                </div>
            </div>
        </div>
        <div class="right-column  content-area col-sm-9">
            <div class="content-page">
                <article>
            <div class="page-header sub-header clearfix">
            <h1><a href="../../../Core/Constant.html">Core</a> <i class="glyphicon glyphicon-chevron-right"></i> <a href="../../../Core/Modules/BaseClass/index.html">Modules</a> <i class="glyphicon glyphicon-chevron-right"></i> <a href="../../../Core/Modules/ContentManagar/index.html">ContentManagar</a>            </h1>
                    <span style="float: left; font-size: 10px; color: gray;">
                        Sunday, April 3, 2016                    </span>
                    <span style="float: right; font-size: 10px; color: gray;">
                        10:44 PM                    </span>
        </div>
    
    <h2>Vấn đề</h2>
<p>Trong quá trình phát triển chúng ta thường gặp trường hợp cần lưu trữ các thông tin theo một tiêu chí nào đó.
Công việc này có thể đơn giản giải quyền bằng cách sử dụng một array, lưu các item vào đó</p>
<pre><code class="language-js">var items = [];

function addItem(item){
items.push(item);
}

function hasItem(item){
for(var i = 0; i &lt; items.length; i++){
if(items[i] === item){
return true;
}
}

return false;
}

function editItem(item, new_value){
//.....
}

function deleteItem(item){
//.....
}

/**
* Các function khác
* .....
*/
</code></pre>
<dl class="dl-horizontal">
    <dt>Ưu điểm</dt>
    <dd><ul>
        <li>Gọn</li>
        <li>Tối ưu cho từng trường hợp</li>
    </ul></dd>
    <dt>Nhược</dt>
    <dd><ul>
        <li>Phải lặp lại các thao tác như nhau (<strong>CRUD</strong>) ở tất cả các trường hợp: thêm, kiểm tra, lấy list, cập nhật, xóa,...</li>
        <li>Số lượng item càng nhiều thì chi phí cho 1 tác vụ càng lớn: nếu list là unique thì mỗi thao tác thêm dữ liệu phải kiểm tra tồn tại.
            Mỗi lần thực hiện tác vụ phải lặp qua từng phần tử</li>
    </ul></dd>
</dl>
<h2>Giải pháp</h2>
<p>Sử dụng ContentManager để lưu trữ, bỏ qua các thao tác đọc CRUD, tập trung vào việc phát triển.</p>
<ul>
    <li>Lưu trữ theo kiểu dữ liệu, tự động xác định kiểu như number, string, function,... hay chỉ định kiểu tùy chọn</li>
    <li>Truy vấn bằng key</li>
    <li>Filter bằng item value, callback</li>
    <li>Hỗ trợ lưu trữ thông tin bổ trợ cho item (meta info)</li>
    <li>Có sẵn các chức năng CRUD: thêm, kiểm tra tồn tại, lấy, cập nhật và xóa item</li>
    <li>Danh sách các item đang được sử dụng, xóa những item không dùng</li>
</ul>
<pre><code class="language-js">var items = new _.M.ContentManager();
</code></pre>
<h3>Thêm:</h3>
<p>Thêm item, tự động xác định kiểu dữ liệu</p>
<pre><code class="language-js">var key = items.add('a');

console.log(key); //content_string_0
items.add(true); //content_boolean_0
items.add([1,2,true, {a:'A', c:'C'}]); //content_array_0
</code></pre>
<p>Thêm item, meta info, tự động xác định kiểu dữ liệu</p>
<pre><code class="language-js">items.add('a', {id: 123}); //content_string_1
items.add(true, {name: 'yahoo'}); //content_boolean_1
items.add([1,2,true, {a:'A', c:'C'}], {expire: 1735693261}); //content_array_1
</code></pre>
<p>Thêm item, meta info, kiểu dữ liệu tùy chọn</p>
<pre><code class="language-js">items.add('a', {id: 123}, 'yahoo'); //content_yahoo_0
</code></pre>
<p>Thêm item nếu chưa có, nếu có trả về key của item đầu tiên (unique)</p>
<pre><code class="language-js">items.addUnique('a'); //content_string_0
items.addUnique('b'); //content_string_2
</code></pre>
<h3>Kiểm tra tồn tại</h3>
<p>Tồn tại kiểu dữ liệu?</p>
<pre><code class="language-js">items.hasType('string'); //true
items.hasType('yahoo'); //true
items.hasType('foo'); //false
</code></pre>
<p>Tồn tại key?</p>
<pre><code class="language-js">items.hasKey('content_string_0'); //true
items.hasKey('content_foo_1'); //false
</code></pre>
<p>Tồn tại item?</p>
<pre><code class="language-js">items.hasContent('a'); //true
items.hasContent('a', 'yahoo'); //true
items.hasContent('a', 'foo'); //false
</code></pre>
<h3>Lấy item</h3>
<p>Lấy item content và meta info bằng key</p>
<pre><code class="language-js">items.get('content_string_0'); //{content: 'a', meta: undefined}
items.get('content_string_999'); //false
</code></pre>
<p>Lấy item content bằng key, hỗ trợ giá trị mặc định nếu key không tồn tại</p>
<pre><code class="language-js">items.getContent('content_string_0', 'hihihi'); //'a'
items.getContent('content_string_999', 'ohhoho'); //ohhoho
</code></pre>
<p>Lấy tất cả item của một kiểu dữ liệu</p>
<pre><code class="language-js">items.getType('string');{content_string_0: {....}, content_string_1: {....}, ....}
</code></pre>
<h3>Cập nhật</h3>
<p>Cập nhật content</p>
<pre><code class="language-js">items.update('content_string_0', 'A');
items.update('content_string_0', 'A', {id: 234});
</code></pre>
<p>Cập nhật meta info</p>
<pre><code class="language-js">items.updateMeta('content_string_1', {id: 456});
</code></pre>
<h3>Sử dụng item</h3>
<p>Sử dụng và kiểm tra sử dụng item</p>
<pre><code class="language-js">items.using('content_string_1');
items.isUsing('content_string_1'); //true
items.isUsing('content_string_999'); //false
items.isUsingContent('a'); //false
</code></pre>
<p>Các item đang sử dụng</p>
<pre><code class="language-js">items.get(items._using);
</code></pre>
<p>Không sử dụng item</p>
<pre><code class="language-js">items.using('content_string_1', false);
//or
items.unused('content_string_1');
</code></pre>
<p>Xóa các item đang được sử dụng</p>
<pre><code class="language-js">items.removeUsing();
</code></pre>
<p>Xóa các item không được sử dụng</p>
<pre><code class="language-js">items.removeUnusing();
</code></pre>
<h3>Xóa item</h3>
<p>Xóa bằng key</p>
<pre><code class="language-js">items.remove('content_yahoo_0'); //[{type: 'yahoo', key: 'content_yahoo_0'}]
</code></pre>
<p>Xóa bằng content</p>
<pre><code class="language-js">items.removeContent('a'); //[{type: 'string', key: 'content_yahoo_1'}]
</code></pre>

        <nav>
        <ul class="pager">
            <li><a href="../../../Core/Modules/FLAG/API.html">Previous</a></li>            <li><a href="../../../Core/Modules/ContentManagar/API.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    

    <!-- jQuery -->
    <script src="../../../themes/daux/js/jquery-1.11.3.min.js"></script>
    <!-- hightlight.js -->
    <script src="../../../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../../../themes/daux/js/daux.js"></script>
    <script src="/dist/underscore_madnh.min.js"></script>
</body>
</html>
